class AddFieldsToCardSets < ActiveRecord::Migration
  def change
  	add_column :card_sets, :name, :string
  	add_column :card_sets, :code, :string
    add_column :card_sets, :gatherer_code, :string
    add_column :card_sets, :release_date, :string
    add_column :card_sets, :border, :string
    add_column :card_sets, :set_type, :string
    add_column :card_sets, :booster, :array
  end
end

class CardSet < ActiveRecord::Base
	has_many :cards
end

class Card < ActiveRecord::Base
	belongs_to :card_set
end

magic.each do |set_array|

	columns = set_array[1]
	CardSet.create(name: columns[0], code: columns[1], gatherer_code: columns[2], release_date: columns[3], border: columns[4], set_type: columns[5], booster: columns[6])
	Card.create()

	column_name = key
	column_name = 'gatherer_code' if key == 'gathererCode'
	column_name = 'set_type' if key == 'type'
	set = CardSet.create( value.reject {|k,v| k =='cards'})
	binding.pry
	cards = value['cards']
	
	# card_records = cards.map { |card| Card.create(card) }


end